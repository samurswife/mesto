(()=>{"use strict";var t={profileEditButton:document.querySelector(".profile__edit-button"),editAvatarButton:document.querySelector(".profile__avatar-button"),addPhotoButton:document.querySelector(".profile__add-button"),submitProfileButton:document.querySelector(".popup__form-button_save"),addAvatarButton:document.querySelector(".popup__form-button_save-avatar"),addCardButton:document.querySelector(".popup__form-button_add"),confirmButton:document.querySelector(".popup__form-button_confirm")},e={editForm:document.querySelector(".popup__form_edit"),avatarForm:document.querySelector(".popup__form_edit-avatar"),addForm:document.querySelector(".popup__form_add")},n={formNameInput:document.querySelector(".popup__form-input_name"),formAboutInput:document.querySelector(".popup__form-input_about"),formAvatarInput:document.querySelector(".popup__form-input_avatar")},r=document.querySelector(".elements"),o={inputSelector:".popup__form-input",submitButtonSelector:".popup__form-button",inactiveButtonClass:"popup__form-button_disabled",inputErrorClass:"popup__form-input_type_error",errorClass:"popup__form-input-error_active"};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))},u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.baseUrl,this._headers=e.headers}var e,n;return e=t,(n=[{key:"loadUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then(a).then((function(t){return t})).catch((function(t){console.log(t)}))}},{key:"loadInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then(a).then((function(t){return t})).catch((function(t){console.log(t)}))}},{key:"updateUserInfo",value:function(t){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.about})}).then(a).then((function(t){return t})).catch((function(t){console.log(t)}))}},{key:"updateUserAvatar",value:function(t){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatar})}).then(a).catch((function(t){console.log(t)}))}},{key:"uploadNewCard",value:function(t){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then(a).then((function(t){return t})).catch((function(t){console.log(t)}))}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t._id),{method:"DELETE",headers:this._headers}).then(a).then((function(t){return t})).catch((function(t){console.log(t)}))}},{key:"likeCard",value:function(t){return fetch("".concat(this._url,"/cards/likes/").concat(t._id),{method:"PUT",headers:this._headers}).then(a).then((function(t){return t})).catch((function(t){console.log(t)}))}},{key:"dislikeCard",value:function(t){return fetch("".concat(this._url,"/cards/likes/").concat(t._id),{method:"DELETE",headers:this._headers}).then(a).then((function(t){return t})).catch((function(t){console.log(t)}))}}])&&i(e.prototype,n),t}();function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=n}var e,n;return e=t,(n=[{key:"renderItems",value:function(t,e){var n=this;t.forEach((function(t){n._renderer(t,e)}))}},{key:"addItem",value:function(t){this._container.append(t)}}])&&c(e.prototype,n),t}();function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e){var n=e.card,r=e.templateSelector,o=e.handleCardClick,i=e.handleDeleteIconClick,a=e.handleLikeClick,u=e.userId;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userId=u,this._name=n.name,this._link=n.link,this._likes=n.likes,this._id=n._id,this._owner=n.owner,this._templateSelector=r,this._handleCardClick=o,this._handleDeleteIconClick=i,this._handleLikeClick=a}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"createCard",value:function(){return this._card=this._getTemplate(),this._cardImage=this._card.querySelector(".element__image"),this._cardTitle=this._card.querySelector(".element__title"),this._cardLikes=this._card.querySelector(".element__like-counter"),this._cardTitle.textContent=this._name,this._cardImage.style.backgroundImage="url(".concat(this._link,")"),this._cardImage.setAttribute("alt",this._name),this._cardLikes.textContent=this._likes.length,this._setEventListeners(),this._card}},{key:"_setEventListeners",value:function(){var t=this;this._card.querySelector(".element__like-button").addEventListener("click",(function(e){return t._handleLikeClick(e,t)})),this._card.querySelector(".element__delete-button").addEventListener("click",(function(e){return t._handleDeleteIconClick(t)})),this._card.querySelector(".element__image").addEventListener("click",(function(e){return t._handleCardClick(e)}))}},{key:"increaseLikes",value:function(t,e){this._cardLikes.textContent=e,t.target.classList.add("element-like-button_active")}},{key:"decreaseLikes",value:function(t,e){this._cardLikes.textContent=e,t.target.classList.remove("element-like-button_active")}},{key:"removeCard",value:function(t){this._card.remove(),this._card=null}}])&&s(e.prototype,n),t}();function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.querySelector(".popup__close-button").addEventListener("click",this.close.bind(this)),this._popup.addEventListener("click",(function(e){e.target===e.currentTarget&&t.close()}))}}])&&p(e.prototype,n),t}();function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=b(r);if(o){var n=b(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return v(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._popupImage=e._popup.querySelector(".popup__image"),e._popupImageTitle=e._popup.querySelector(".popup__image-title"),e}return e=a,(n=[{key:"open",value:function(t){m(b(a.prototype),"open",this).call(this),this._popupImageTitle.textContent=t.name,this._popupImage.setAttribute("src",t.link),this._popupImage.setAttribute("alt",t.name)}}])&&_(e.prototype,n),a}(h);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e,n){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t,e){return!e||"object"!==S(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(r);if(o){var n=L(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return w(this,t)});function a(t){var e,n=t.popupSelector,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,n))._handleFormSubmit=r,e._popupForm=e._popup.querySelector(".popup__form"),e}return e=a,(n=[{key:"_getInputValues",value:function(){var t=this;return this._inputList=this._popup.querySelectorAll(".popup__form-input"),this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"setEventListeners",value:function(){var t=this;C(L(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())}))}},{key:"close",value:function(){C(L(a.prototype),"close",this).call(this),this._popupForm.reset()}}])&&g(e.prototype,n),a}(h);function I(t){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=A(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var T=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=A(r);if(o){var n=A(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return B(this,t)});function a(t){var e,n=t.popupSelector,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,n))._handleFormSubmit=r,e._popupForm=e._popup.querySelector(".popup__form"),e}return e=a,(n=[{key:"setHandleFormSubmit",value:function(t){this._handleFormSubmit=t}},{key:"setEventListeners",value:function(){var t=this;j(A(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(e){e.preventDefault(),t._handleFormSubmit()}))}},{key:"close",value:function(){j(A(a.prototype),"close",this).call(this)}}])&&P(e.prototype,n),a}(h);function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var F=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._userNameSelector=e,this._userInfoSelector=n,this._userAvatarSelector=r,this._name=document.querySelector(this._userNameSelector),this._info=document.querySelector(this._userInfoSelector),this._avatar=document.querySelector(this._userAvatarSelector)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){var t={};return t.name=this._name.textContent,t.info=this._info.textContent,t}},{key:"setUserInfo",value:function(t,e){this._name.textContent=t,this._info.textContent=e}},{key:"setUserAvatar",value:function(t){this._avatar.style.backgroundImage='url("'.concat(t,'")')}}])&&R(e.prototype,n),t}();function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const D=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=n,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}var e,n;return e=t,(n=[{key:"_showInputError",value:function(t,e){var n=this._formSelector.querySelector("#".concat(t.id,"-error"));t.classList.add(this._inputErrorClass),n.textContent=e,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formSelector.querySelector("#".concat(t.id,"-error"));t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_isValid",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_setEventListeners",value:function(){var t=this;this._inputList=Array.from(this._formSelector.querySelectorAll(this._inputSelector)),this._buttonElement=this._formSelector.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._isValid(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formSelector.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}}])&&x(e.prototype,n),t}();function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var V=new u({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-17",headers:{authorization:"0a6bff0b-1736-41fa-9351-11fa93721afd","Content-Type":"application/json"}}),N=function(t,e,n,r){e.textContent="".concat(t?r:n)},H=new F(".profile__name",".profile__about",".profile__avatar"),J=null,G=new l({renderer:W},r),M=new k(".popup_preview");M.setEventListeners();var z=new O({popupSelector:".popup_edit-form",handleFormSubmit:function(e){N(!0,t.submitProfileButton,"Сохранить","Загрузка..."),V.updateUserInfo(e).then((function(t){H.setUserInfo(t.name,t.about)})).then((function(){N(!1,t.submitProfileButton,"Сохранить","Загрузка...")})).finally((function(){z.close()}))}});z.setEventListeners();var $=new O({popupSelector:".popup_edit-avatar-form",handleFormSubmit:function(e){N(!0,t.addAvatarButton,"Сохранить","Загрузка..."),V.updateUserAvatar(e).then((function(t){H.setUserAvatar(t.avatar)})).then((function(){N(!1,t.addAvatarButton,"Сохранить","Загрузка...")})).finally((function(){$.close()}))}});$.setEventListeners();var K=new O({popupSelector:".popup_add-form",handleFormSubmit:function(e){N(!0,t.addCardButton,"Создать","Сохранение..."),V.uploadNewCard(e).then((function(t){return W(t,J)})).then((function(){N(!1,t.addCardButton,"Создать","Сохранение...")})).catch((function(t){console.log(t)})).finally((function(){K.close()}))}});K.setEventListeners();var Q=new T({popupSelector:".popup_confirm",handleFormSubmit:""});function W(e,n){var r=new f({card:e,templateSelector:"#cards",handleCardClick:function(){M.open(e)},handleDeleteIconClick:function(e){Q.setHandleFormSubmit((function(){N(!0,t.confirmButton,"Да","Удаление..."),V.deleteCard(e).then((function(){return N(!1,t.confirmButton,"Да","Удаление")})).then((function(){return r.removeCard()})).finally((function(){Q.close()}))})),Q.open()},handleLikeClick:function(t,e){0===e._likes.length?V.likeCard(e).then((function(n){e._likes=n.likes,r.increaseLikes(t,n.likes.length)})):e._likes.some((function(o){o._id===n?V.dislikeCard(e).then((function(n){e._likes=n.likes,r.decreaseLikes(t,n.likes.length)})):V.likeCard(e).then((function(n){e._likes=n.likes,r.increaseLikes(t,n.likes.length)}))}))},userId:n}),o=r.createCard();n!==e.owner._id&&o.querySelector(".element__delete-button").classList.add("element__delete-button_hidden"),e.likes.forEach((function(t){t._id===n&&o.querySelector(".element__like-button").classList.add("element-like-button_active")})),G.addItem(o)}Q.setEventListeners(),Promise.all([V.loadUserInfo(),V.loadInitialCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(e,n)||function(t,e){if(t){if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];H.setUserInfo(o.name,o.about),H.setUserAvatar(o.avatar),G.renderItems(i,o._id),J=o._id})).catch((function(t){console.log(t)})),t.addPhotoButton.addEventListener("click",(function(){t.addCardButton.classList.add(o.inactiveButtonClass),K.open()})),t.profileEditButton.addEventListener("click",(function(){var t=H.getUserInfo();n.formNameInput.value=t.name,n.formAboutInput.value=t.info,z.open()})),t.editAvatarButton.addEventListener("click",(function(){t.addAvatarButton.classList.add(o.inactiveButtonClass),$.open()})),new D(o,e.editForm).enableValidation(),new D(o,e.avatarForm).enableValidation(),new D(o,e.addForm).enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJidXR0b25TZWxlY3RvcnMiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImVkaXRBdmF0YXJCdXR0b24iLCJhZGRQaG90b0J1dHRvbiIsInN1Ym1pdFByb2ZpbGVCdXR0b24iLCJhZGRBdmF0YXJCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwiY29uZmlybUJ1dHRvbiIsImZvcm1TZWxlY3RvcnMiLCJlZGl0Rm9ybSIsImF2YXRhckZvcm0iLCJhZGRGb3JtIiwiaW5wdXRTZWxlY3RvcnMiLCJmb3JtTmFtZUlucHV0IiwiZm9ybUFib3V0SW5wdXQiLCJmb3JtQXZhdGFySW5wdXQiLCJjYXJkc0NvbnRhaW5lciIsImZvcm1Db25maWciLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhhbmRsZU9yaWdpbmFsUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiQXBpIiwiY29uZmlnIiwidGhpcyIsIl91cmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiZGF0YSIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJuYW1lIiwiYWJvdXQiLCJsaW5rIiwiYXZhdGFyIiwiY2FyZCIsIl9pZCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImNhcmRzIiwidXNlcklkIiwiZm9yRWFjaCIsIml0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwiQ2FyZCIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVJY29uQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJfdXNlcklkIiwiX25hbWUiLCJfbGluayIsIl9saWtlcyIsImxpa2VzIiwiX293bmVyIiwib3duZXIiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlSWNvbkNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZCIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkSW1hZ2UiLCJfY2FyZFRpdGxlIiwiX2NhcmRMaWtlcyIsInRleHRDb250ZW50Iiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJzZXRBdHRyaWJ1dGUiLCJsZW5ndGgiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiY2xvc2UiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cEltYWdlVGl0bGUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwRm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlBvcHVwV2l0aENvbmZpcm0iLCJoYW5kbGVyIiwiVXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckluZm9TZWxlY3RvciIsInVzZXJBdmF0YXJTZWxlY3RvciIsIl91c2VyTmFtZVNlbGVjdG9yIiwiX3VzZXJJbmZvU2VsZWN0b3IiLCJfdXNlckF2YXRhclNlbGVjdG9yIiwiX2luZm8iLCJfYXZhdGFyIiwiaW5mbyIsImZvcm1TZWxlY3RvciIsIl9mb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJBcnJheSIsImZyb20iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaXNWYWxpZCIsImV2dCIsImFwaSIsImF1dGhvcml6YXRpb24iLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwiYnV0dG9uIiwiaW5pdEJ1dHRvblRleHQiLCJsb2FkaW5nQnV0dG9uVGV4dCIsInVzZXJQcm9maWxlIiwiY2FyZHNTZWN0aW9uIiwicmVuZGVyQ2FyZCIsInByZXZpZXdQb3B1cCIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBVc2VySW5mb0Zvcm0iLCJmb3JtRGF0YSIsInVwZGF0ZVVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJwb3B1cFVzZXJBdmF0YXJGb3JtIiwidXBkYXRlVXNlckF2YXRhciIsInNldFVzZXJBdmF0YXIiLCJwb3B1cEFkZENhcmRGb3JtIiwidXBsb2FkTmV3Q2FyZCIsInBvcHVwQ29uZmlybURlbGV0aW9uIiwiY2FyZEVsZW1lbnQiLCJvcGVuIiwic2V0SGFuZGxlRm9ybVN1Ym1pdCIsImRlbGV0ZUNhcmQiLCJyZW1vdmVDYXJkIiwibGlrZUNhcmQiLCJpbmNyZWFzZUxpa2VzIiwiZGlzbGlrZUNhcmQiLCJkZWNyZWFzZUxpa2VzIiwibmV3Q2FyZCIsImNyZWF0ZUNhcmQiLCJhZGRJdGVtIiwiYWxsIiwibG9hZFVzZXJJbmZvIiwibG9hZEluaXRpYWxDYXJkcyIsInVzZXJEYXRhIiwiaW5pdGlhbENhcmRzIiwicmVuZGVySXRlbXMiLCJ1c2VyT2JqIiwiZ2V0VXNlckluZm8iLCJGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJtYXBwaW5ncyI6Im1CQUFPLElBUU1BLEVBQWtCLENBQzdCQyxrQkFBbUJDLFNBQVNDLGNBQWMseUJBQzFDQyxpQkFBa0JGLFNBQVNDLGNBQWMsMkJBQ3pDRSxlQUFnQkgsU0FBU0MsY0FBYyx3QkFDdkNHLG9CQUFxQkosU0FBU0MsY0FBYyw0QkFDNUNJLGdCQUFpQkwsU0FBU0MsY0FBYyxtQ0FDeENLLGNBQWVOLFNBQVNDLGNBQWMsMkJBQ3RDTSxjQUFlUCxTQUFTQyxjQUFjLGdDQUczQk8sRUFBZ0IsQ0FDM0JDLFNBQVVULFNBQVNDLGNBQWMscUJBQ2pDUyxXQUFZVixTQUFTQyxj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LEVBQVlrQyxjQUM1QjlMLHNCQUFxQzZMLEVBQVF6SixLQUM3Q3BDLHVCQUFzQzZMLEVBQVFsRSxLQUM5Q3NDLEVBQWtCVyxVQUlwQjFMLEVBQWdCSSxpQkFBaUI0RixpQkFBaUIsU0FBUyxXQUN6RGhHLGdDQUE4Q21CLEVBQVdHLHFCQUN6RDZKLEVBQW9CTyxVQU9XLElBQUltQixFQUFjMUwsRUFBWVQsRUFBY0MsVUFDcERtTSxtQkFHTyxJQUFJRCxFQUFjMUwsRUFBWVQsRUFBY0UsWUFDcERrTSxtQkFHSyxJQUFJRCxFQUFjMUwsRUFBWVQsRUFBY0csU0FDcERpTSxvQiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHBvcHVwU2VsZWN0b3JzID0ge1xyXG4gIHBvcHVwUHJldmlld1NlbGVjdG9yOiBcIi5wb3B1cF9wcmV2aWV3XCIsXHJcbiAgcG9wdXBVc2VySW5mb0Zvcm1TZWxlY3RvcjogXCIucG9wdXBfZWRpdC1mb3JtXCIsXHJcbiAgcG9wdXBVc2VyQXZhdGFyRm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9lZGl0LWF2YXRhci1mb3JtXCIsXHJcbiAgcG9wdXBBZGRDYXJkRm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9hZGQtZm9ybVwiLFxyXG4gIHBvcHVwQ29uZmlybVNlbGVjdG9yOiBcIi5wb3B1cF9jb25maXJtXCJcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBidXR0b25TZWxlY3RvcnMgPSB7XHJcbiAgcHJvZmlsZUVkaXRCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIiksXHJcbiAgZWRpdEF2YXRhckJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnV0dG9uXCIpLFxyXG4gIGFkZFBob3RvQnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIiksXHJcbiAgc3VibWl0UHJvZmlsZUJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybS1idXR0b25fc2F2ZVwiKSxcclxuICBhZGRBdmF0YXJCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tYnV0dG9uX3NhdmUtYXZhdGFyXCIpLFxyXG4gIGFkZENhcmRCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tYnV0dG9uX2FkZFwiKSxcclxuICBjb25maXJtQnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWJ1dHRvbl9jb25maXJtXCIpXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybVNlbGVjdG9ycyA9IHtcclxuICBlZGl0Rm9ybTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV9lZGl0XCIpLFxyXG4gIGF2YXRhckZvcm06IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fZWRpdC1hdmF0YXJcIiksXHJcbiAgYWRkRm9ybTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV9hZGRcIilcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbnB1dFNlbGVjdG9ycyA9IHtcclxuICBmb3JtTmFtZUlucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWlucHV0X25hbWVcIiksXHJcbiAgZm9ybUFib3V0SW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0taW5wdXRfYWJvdXRcIiksXHJcbiAgZm9ybUF2YXRhcklucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWlucHV0X2F2YXRhclwiKVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFbGVtZW50c1NlbGVjdG9ycyA9IHtcclxuICBwcm9maWxlTmFtZTogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIHByb2ZpbGVBYm91dDogXCIucHJvZmlsZV9fYWJvdXRcIixcclxuICBwcm9maWxlQXZhdGFyOiBcIi5wcm9maWxlX19hdmF0YXJcIlxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzJyk7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZENvbmZpZyA9IHtcclxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmRzXCJcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtQ29uZmlnID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLWlucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2Zvcm0tYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19mb3JtLWlucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19mb3JtLWlucHV0LWVycm9yX2FjdGl2ZVwiXHJcbn07XHJcbiIsImNvbnN0IGhhbmRsZU9yaWdpbmFsUmVzcG9uc2UgPSAocmVzKSA9PiB7XHJcbiAgaWYgKHJlcy5vaykge1xyXG4gICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgfVxyXG4gIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICB0aGlzLl91cmwgPSBjb25maWcuYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBjb25maWcuaGVhZGVycztcclxuICB9XHJcblxyXG4gIGxvYWRVc2VySW5mbygpe1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSlcclxuICAgIC50aGVuKGhhbmRsZU9yaWdpbmFsUmVzcG9uc2UpXHJcbiAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgbG9hZEluaXRpYWxDYXJkcygpe1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSlcclxuICAgIC50aGVuKGhhbmRsZU9yaWdpbmFsUmVzcG9uc2UpXHJcbiAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckluZm8odXNlcil7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IHVzZXIuYWJvdXRcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbihoYW5kbGVPcmlnaW5hbFJlc3BvbnNlKVxyXG4gICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VyQXZhdGFyKGxpbmspe1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogbGluay5hdmF0YXJcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbihoYW5kbGVPcmlnaW5hbFJlc3BvbnNlKVxyXG4gICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwbG9hZE5ld0NhcmQoY2FyZCl7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGNhcmQubmFtZSxcclxuICAgICAgICBsaW5rOiBjYXJkLmxpbmtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbihoYW5kbGVPcmlnaW5hbFJlc3BvbnNlKVxyXG4gICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmQpe1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkLl9pZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAudGhlbihoYW5kbGVPcmlnaW5hbFJlc3BvbnNlKVxyXG4gICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZChjYXJkKXtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzL2xpa2VzLyR7Y2FyZC5faWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oaGFuZGxlT3JpZ2luYWxSZXNwb25zZSlcclxuICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICByZXR1cm4gZGF0YTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGlzbGlrZUNhcmQoY2FyZCl7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy9saWtlcy8ke2NhcmQuX2lkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgIC50aGVuKGhhbmRsZU9yaWdpbmFsUmVzcG9uc2UpXHJcbiAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3Ioe3JlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3Ipe1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoY2FyZHMsIHVzZXJJZCl7XHJcbiAgICBjYXJkcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0sIHVzZXJJZCk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7Y2FyZCwgdGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVEZWxldGVJY29uQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgdXNlcklkfSl7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZC5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGNhcmQubGluaztcclxuICAgIHRoaXMuX2xpa2VzID0gY2FyZC5saWtlcztcclxuICAgIHRoaXMuX2lkID0gY2FyZC5faWQ7XHJcbiAgICB0aGlzLl9vd25lciA9IGNhcmQub3duZXI7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUljb25DbGljayA9IGhhbmRsZURlbGV0ZUljb25DbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50XCIpLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKTtcclxuICAgIHRoaXMuX2NhcmRMaWtlcyA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtY291bnRlcicpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWA7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc2V0QXR0cmlidXRlKFwiYWx0XCIsIHRoaXMuX25hbWUpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5faGFuZGxlTGlrZUNsaWNrKGUsIHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlLWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVJY29uQ2xpY2sodGhpcykpO1xyXG5cclxuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soZSkpO1xyXG4gIH1cclxuXHJcbiAgaW5jcmVhc2VMaWtlcyhlLCBsaWtlcyl7XHJcbiAgICB0aGlzLl9jYXJkTGlrZXMudGV4dENvbnRlbnQgPSBsaWtlcztcclxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50LWxpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIGRlY3JlYXNlTGlrZXMoZSwgbGlrZXMpe1xyXG4gICAgdGhpcy5fY2FyZExpa2VzLnRleHRDb250ZW50ID0gbGlrZXM7XHJcbiAgICBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudC1saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkKGUpIHtcclxuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkID0gbnVsbDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3Ipe1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3Blbigpe1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpe1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZSl7XHJcbiAgICBpZihlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwe1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZVRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtdGl0bGVcIik7XG4gIH1cblxuICBvcGVuKGVsZW1lbnQpe1xuICAgIHN1cGVyLm9wZW4oKTtcblxuICAgIHRoaXMuX3BvcHVwSW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IGVsZW1lbnQubmFtZTtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBlbGVtZW50LmxpbmspO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGVsZW1lbnQubmFtZSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSl7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpe1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fZm9ybS1pbnB1dFwiKTtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCl7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSl7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIHNldEhhbmRsZUZvcm1TdWJtaXQoaGFuZGxlcil7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlcjtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCl7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJJbmZvU2VsZWN0b3IsIHVzZXJBdmF0YXJTZWxlY3Rvcil7XG4gICAgdGhpcy5fdXNlck5hbWVTZWxlY3RvciA9IHVzZXJOYW1lU2VsZWN0b3I7XG4gICAgdGhpcy5fdXNlckluZm9TZWxlY3RvciA9IHVzZXJJbmZvU2VsZWN0b3I7XG4gICAgdGhpcy5fdXNlckF2YXRhclNlbGVjdG9yID0gdXNlckF2YXRhclNlbGVjdG9yO1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3VzZXJOYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2luZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3VzZXJJbmZvU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdXNlckF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXIgPSB7fTtcbiAgICB1c2VyLm5hbWUgPSB0aGlzLl9uYW1lLnRleHRDb250ZW50O1xuICAgIHVzZXIuaW5mbyA9IHRoaXMuX2luZm8udGV4dENvbnRlbnQ7XG4gICAgcmV0dXJuIHVzZXI7XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBpbmZvKSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5faW5mby50ZXh0Q29udGVudCA9IGluZm87XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKGF2YXRhcil7XG4gICAgdGhpcy5fYXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCIke2F2YXRhcn1cIilgO1xuICB9XG59XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihmb3JtQ29uZmlnLCBmb3JtU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBmb3JtQ29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGZvcm1Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gZm9ybUNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gZm9ybUNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gZm9ybUNvbmZpZy5lcnJvckNsYXNzO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICB9O1xyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9pc1ZhbGlkKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtU2VsZWN0b3IucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQge1xyXG4gIHBvcHVwU2VsZWN0b3JzLFxyXG4gIGJ1dHRvblNlbGVjdG9ycyxcclxuICBmb3JtU2VsZWN0b3JzLFxyXG4gIGlucHV0U2VsZWN0b3JzLFxyXG4gIHByb2ZpbGVFbGVtZW50c1NlbGVjdG9ycyxcclxuICBjYXJkc0NvbnRhaW5lcixcclxuICBjYXJkQ29uZmlnLFxyXG4gIGZvcm1Db25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiXHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuXHJcbi8vKioq0KHQvtC30LTQsNC90LjQtSDQutC70LDRgdGB0LAgQXBpKioqL1xyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0xNycsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogJzBhNmJmZjBiLTE3MzYtNDFmYS05MzUxLTExZmE5MzcyMWFmZCcsXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgfVxyXG59KTtcclxuXHJcbi8v0J/QvtC00YHQutCw0LfQutCwLCDRh9GC0L4g0LTQsNC90L3Ri9C1INC30LDQs9GA0YPQttCw0Y7RgtGB0Y8g0L3QsCDRgdC10YDQstC10YBcclxuY29uc3QgcmVuZGVyTG9hZGluZyA9IChpc0xvYWRpbmcsIGJ1dHRvbiwgaW5pdEJ1dHRvblRleHQsIGxvYWRpbmdCdXR0b25UZXh0KSA9PiB7XHJcbiAgaWYoaXNMb2FkaW5nKXtcclxuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGAke2xvYWRpbmdCdXR0b25UZXh0fWA7XHJcbiAgfSBlbHNlIHtcclxuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGAke2luaXRCdXR0b25UZXh0fWA7XHJcbiAgfVxyXG59XHJcblxyXG4vLyoqKtCh0L7Qt9C00LDQvdC40LUg0L/RgNC+0YTQuNC70Y8g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPICoqKi8vXHJcblxyXG5jb25zdCB1c2VyUHJvZmlsZSA9IG5ldyBVc2VySW5mbyhwcm9maWxlRWxlbWVudHNTZWxlY3RvcnMucHJvZmlsZU5hbWUsIHByb2ZpbGVFbGVtZW50c1NlbGVjdG9ycy5wcm9maWxlQWJvdXQsIHByb2ZpbGVFbGVtZW50c1NlbGVjdG9ycy5wcm9maWxlQXZhdGFyKTtcclxubGV0IHVzZXJJZCA9IG51bGw7XHJcblxyXG4vLyoqKtCh0L7Qt9C00LDQvdC40LUg0YHQtdC60YbQuNC4INC00LvRjyDQutCw0YDRgtC+0YfQtdC6ICoqKi8vXHJcblxyXG5jb25zdCBjYXJkc1NlY3Rpb24gPSBuZXcgU2VjdGlvbih7XHJcbiAgcmVuZGVyZXI6IHJlbmRlckNhcmRcclxufSwgY2FyZHNDb250YWluZXIpO1xyXG5cclxuLy8qKirQodC+0LfQtNCw0L3QuNC1INC/0L7Qv9Cw0L/QvtCyICoqKi8vXHJcblxyXG4vL9Cf0L7Qv9Cw0L8g0LTQu9GPINC/0YDQvtGB0LzQvtGC0YDQsCDQutCw0YDRgtC40L3QutC4XHJcbmNvbnN0IHByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cFNlbGVjdG9ycy5wb3B1cFByZXZpZXdTZWxlY3Rvcik7XHJcbnByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy/Qn9C+0L/QsNC/INC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LVcclxuY29uc3QgcG9wdXBVc2VySW5mb0Zvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogcG9wdXBTZWxlY3RvcnMucG9wdXBVc2VySW5mb0Zvcm1TZWxlY3RvcixcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoZm9ybURhdGEpID0+IHtcclxuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgYnV0dG9uU2VsZWN0b3JzLnN1Ym1pdFByb2ZpbGVCdXR0b24sIFwi0KHQvtGF0YDQsNC90LjRgtGMXCIsIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiKTtcclxuICAgIGFwaS51cGRhdGVVc2VySW5mbyhmb3JtRGF0YSkudGhlbihkYXRhID0+IHtcclxuICAgICAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmFib3V0KTtcclxuICAgIH0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIGJ1dHRvblNlbGVjdG9ycy5zdWJtaXRQcm9maWxlQnV0dG9uLCBcItCh0L7RhdGA0LDQvdC40YLRjFwiLCBcItCX0LDQs9GA0YPQt9C60LAuLi5cIik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cFVzZXJJbmZvRm9ybS5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59KTtcclxucG9wdXBVc2VySW5mb0Zvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0J/QvtC/0LDQvyDQtNC70Y8g0LfQsNCz0YDRg9C30LrQuCDQsNCy0LDRgtCw0YDQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuY29uc3QgcG9wdXBVc2VyQXZhdGFyRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBwb3B1cFNlbGVjdG9ycy5wb3B1cFVzZXJBdmF0YXJGb3JtU2VsZWN0b3IsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XHJcbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIGJ1dHRvblNlbGVjdG9ycy5hZGRBdmF0YXJCdXR0b24sIFwi0KHQvtGF0YDQsNC90LjRgtGMXCIsIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiKTtcclxuICAgIGFwaS51cGRhdGVVc2VyQXZhdGFyKGZvcm1EYXRhKS50aGVuKGRhdGEgPT4ge1xyXG4gICAgICB1c2VyUHJvZmlsZS5zZXRVc2VyQXZhdGFyKGRhdGEuYXZhdGFyKTtcclxuICAgIH0pXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIGJ1dHRvblNlbGVjdG9ycy5hZGRBdmF0YXJCdXR0b24sIFwi0KHQvtGF0YDQsNC90LjRgtGMXCIsIFwi0JfQsNCz0YDRg9C30LrQsC4uLlwiKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwVXNlckF2YXRhckZvcm0uY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSk7XHJcbnBvcHVwVXNlckF2YXRhckZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0J/QvtC/0LDQvyDQtNC70Y8g0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBwb3B1cEFkZENhcmRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHBvcHVwU2VsZWN0b3JzLnBvcHVwQWRkQ2FyZEZvcm1TZWxlY3RvcixcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoZm9ybURhdGEpID0+IHtcclxuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgYnV0dG9uU2VsZWN0b3JzLmFkZENhcmRCdXR0b24sIFwi0KHQvtC30LTQsNGC0YxcIiwgXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiKTtcclxuXHJcbiAgICBhcGkudXBsb2FkTmV3Q2FyZChmb3JtRGF0YSlcclxuICAgIC50aGVuKChjYXJkKSA9PiByZW5kZXJDYXJkKGNhcmQsIHVzZXJJZCkpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIGJ1dHRvblNlbGVjdG9ycy5hZGRDYXJkQnV0dG9uLCBcItCh0L7Qt9C00LDRgtGMXCIsIFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIik7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cEFkZENhcmRGb3JtLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5wb3B1cEFkZENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL9Cf0L7Qv9Cw0L8g0LTQu9GPINC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPINGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBwb3B1cENvbmZpcm1EZWxldGlvbiA9IG5ldyBQb3B1cFdpdGhDb25maXJtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBwb3B1cFNlbGVjdG9ycy5wb3B1cENvbmZpcm1TZWxlY3RvcixcclxuICBoYW5kbGVGb3JtU3VibWl0OiBcIlwiXHJcbn0pO1xyXG5wb3B1cENvbmZpcm1EZWxldGlvbi5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8qKirQoNCw0LHQvtGC0LAg0YEg0LrQsNGA0YLQvtGH0LrQsNC80LgqKiovL1xyXG5cclxuLy/QodC+0LfQtNCw0L3QuNC1INC60LDRgNGC0L7Rh9C60LhcclxuZnVuY3Rpb24gcmVuZGVyQ2FyZCAoY2FyZCwgdXNlcklkKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZCh7XHJcbiAgICBjYXJkOiBjYXJkLFxyXG4gICAgdGVtcGxhdGVTZWxlY3RvcjogY2FyZENvbmZpZy5jYXJkVGVtcGxhdGUsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgcHJldmlld1BvcHVwLm9wZW4oY2FyZCk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlRGVsZXRlSWNvbkNsaWNrOiAoY2FyZCkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdIYW5kbGVGb3JtU3VibWl0ID0gKCkgPT4ge1xyXG4gICAgICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgYnV0dG9uU2VsZWN0b3JzLmNvbmZpcm1CdXR0b24sIFwi0JTQsFwiLCBcItCj0LTQsNC70LXQvdC40LUuLi5cIik7XHJcbiAgICAgICAgYXBpLmRlbGV0ZUNhcmQoY2FyZClcclxuICAgICAgICAudGhlbigoKSA9PiByZW5kZXJMb2FkaW5nKGZhbHNlLCBidXR0b25TZWxlY3RvcnMuY29uZmlybUJ1dHRvbiwgXCLQlNCwXCIsIFwi0KPQtNCw0LvQtdC90LjQtVwiKSlcclxuICAgICAgICAudGhlbigoKSA9PiBjYXJkRWxlbWVudC5yZW1vdmVDYXJkKCkpXHJcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgcG9wdXBDb25maXJtRGVsZXRpb24uY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBwb3B1cENvbmZpcm1EZWxldGlvbi5zZXRIYW5kbGVGb3JtU3VibWl0KG5ld0hhbmRsZUZvcm1TdWJtaXQpO1xyXG4gICAgICBwb3B1cENvbmZpcm1EZWxldGlvbi5vcGVuKCk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrOiAoZSwgY2FyZCkgPT4ge1xyXG4gICAgICBpZihjYXJkLl9saWtlcy5sZW5ndGggPT09IDApe1xyXG4gICAgICAgIGFwaS5saWtlQ2FyZChjYXJkKVxyXG4gICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgICAgICAgICAgY2FyZEVsZW1lbnQuaW5jcmVhc2VMaWtlcyhlLCBkYXRhLmxpa2VzLmxlbmd0aCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjYXJkLl9saWtlcy5zb21lKHVzZXIgPT4ge1xyXG4gICAgICAgICAgaWYodXNlci5faWQgPT09IHVzZXJJZCkge1xyXG4gICAgICAgICAgICBhcGkuZGlzbGlrZUNhcmQoY2FyZClcclxuICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZC5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgICAgICAgICAgIGNhcmRFbGVtZW50LmRlY3JlYXNlTGlrZXMoZSwgZGF0YS5saWtlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9KTsgLy9hcGkuZGlzbGlrZUNhcmQoKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXBpLmxpa2VDYXJkKGNhcmQpXHJcbiAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgIGNhcmQuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgICAgICAgICAgICBjYXJkRWxlbWVudC5pbmNyZWFzZUxpa2VzKGUsIGRhdGEubGlrZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgfSk7IC8vYXBpLmxpa2VDYXJkKClcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KSAvL2NhcmQuX2xpa2VzLmZvckVhY2goKVxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgdXNlcklkOiB1c2VySWRcclxuICB9KTtcclxuXHJcbiAgY29uc3QgbmV3Q2FyZCA9IGNhcmRFbGVtZW50LmNyZWF0ZUNhcmQoKTtcclxuXHJcbiAgaWYodXNlcklkICE9PSBjYXJkLm93bmVyLl9pZCkge1xyXG4gICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2RlbGV0ZS1idXR0b25cIikuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2RlbGV0ZS1idXR0b25faGlkZGVuXCIpO1xyXG4gIH1cclxuXHJcbiAgY2FyZC5saWtlcy5mb3JFYWNoKHVzZXIgPT4ge1xyXG4gICAgaWYodXNlci5faWQgPT09IHVzZXJJZCkge1xyXG4gICAgICBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1idXR0b25cIikuY2xhc3NMaXN0LmFkZChcImVsZW1lbnQtbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBjYXJkc1NlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTtcclxufVxyXG5cclxuLy8qKirQl9Cw0LPRgNGD0LfQutCwINC90LDRh9Cw0LvRjNC90YvRhSDQtNCw0L3QvdGL0YUg0L3QsCDRgdGC0YDQsNC90LjRhtGDICoqKi8vXHJcblByb21pc2UuYWxsKFtcclxuICBhcGkubG9hZFVzZXJJbmZvKCksXHJcbiAgYXBpLmxvYWRJbml0aWFsQ2FyZHMoKVxyXG5dKVxyXG4udGhlbigoW3VzZXJEYXRhLCBpbml0aWFsQ2FyZHNdKSA9PiB7XHJcbiAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8odXNlckRhdGEubmFtZSwgdXNlckRhdGEuYWJvdXQpO1xyXG4gIHVzZXJQcm9maWxlLnNldFVzZXJBdmF0YXIodXNlckRhdGEuYXZhdGFyKTtcclxuICBjYXJkc1NlY3Rpb24ucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzLCB1c2VyRGF0YS5faWQpO1xyXG4gIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcclxufSlcclxuLmNhdGNoKGVyciA9PiB7XHJcbiAgY29uc29sZS5sb2coZXJyKTtcclxufSk7XHJcblxyXG4vLyoqKtCh0LvRg9GI0LDRgtC10LvQuCDRgdC+0LHRi9GC0LjQuSAqKiovL1xyXG5cclxuLy/QmtC90L7Qv9C60LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxyXG5idXR0b25TZWxlY3RvcnMuYWRkUGhvdG9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBidXR0b25TZWxlY3RvcnMuYWRkQ2FyZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKGZvcm1Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgcG9wdXBBZGRDYXJkRm9ybS5vcGVuKCk7XHJcbiAgfVxyXG4pO1xyXG5cclxuLy/QmtC90L7Qv9C60LAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xyXG5idXR0b25TZWxlY3RvcnMucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB1c2VyT2JqID0gdXNlclByb2ZpbGUuZ2V0VXNlckluZm8oKTtcclxuICBpbnB1dFNlbGVjdG9ycy5mb3JtTmFtZUlucHV0LnZhbHVlID0gdXNlck9iai5uYW1lO1xyXG4gIGlucHV0U2VsZWN0b3JzLmZvcm1BYm91dElucHV0LnZhbHVlID0gdXNlck9iai5pbmZvO1xyXG4gIHBvcHVwVXNlckluZm9Gb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG4vL9Ca0L3QvtC/0LrQsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINCw0LLQsNGC0LDRgNCwXHJcbmJ1dHRvblNlbGVjdG9ycy5lZGl0QXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYnV0dG9uU2VsZWN0b3JzLmFkZEF2YXRhckJ1dHRvbi5jbGFzc0xpc3QuYWRkKGZvcm1Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgcG9wdXBVc2VyQXZhdGFyRm9ybS5vcGVuKCk7XHJcbiAgfVxyXG4pO1xyXG5cclxuLy8qKirQktCw0LvQuNC00LDRhtC40Y8g0YTQvtGA0LwqKiovL1xyXG5cclxuLy/QktCw0LvQuNC00LDRhtC40Y8g0YTQvtGA0LzRiyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPXHJcbmNvbnN0IGZvcm1FZGl0UHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Db25maWcsIGZvcm1TZWxlY3RvcnMuZWRpdEZvcm0pO1xyXG5mb3JtRWRpdFByb2ZpbGVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy/QktCw0LvQuNC00LDRhtC40Y8g0YTQvtGA0LzRiyDQt9Cw0LzQtdC90Ysg0LDQstCw0YLQsNGA0LBcclxuY29uc3QgZm9ybUVkaXRBdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQ29uZmlnLCBmb3JtU2VsZWN0b3JzLmF2YXRhckZvcm0pO1xyXG5mb3JtRWRpdEF2YXRhclZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL9CS0LDQu9C40LTQsNGG0LjRjyDRhNC+0YDQvNGLINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuY29uc3QgZm9ybUFkZENhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQ29uZmlnLCBmb3JtU2VsZWN0b3JzLmFkZEZvcm0pO1xyXG5mb3JtQWRkQ2FyZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=